FROM node:20-alpine

WORKDIR /usr/src/app/backend/user-management/change-pass

COPY package*.json ./

RUN echo "ðŸ“¦ On vide le cache..."
RUN npm cache clean --force

RUN echo "ðŸ“¦ Installation des dÃ©pendances..."
RUN npm install
RUN npm install bcrypt
RUN npm install fastify
RUN npm install sqlite3
RUN npm install @fastify/cors

RUN echo "ðŸ“¦ Installation de Bcrypt..."
RUN npm install bcryptjs

RUN echo "ðŸ“¦ Installation de metric..."
RUN npm install fastify-metrics prom-client --legacy-peer-deps

COPY . .

RUN echo "ðŸš€ Lancement du Back/User-Management/Change-pass..."
CMD ["node", "server.js"]
